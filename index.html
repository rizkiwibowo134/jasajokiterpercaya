<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jasa Joki Terpercaya</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background: linear-gradient(135deg, #e3f2fd, #ffffff, #000000);
      font-family: "Poppins", sans-serif;
      color: #1565c0;
      overflow-x: hidden;
      animation: fadeIn 1.2s ease-in-out;
    }
    @keyframes fadeIn { from {opacity:0;transform:translateY(20px);} to {opacity:1;transform:translateY(0);} }
    @keyframes slideIn { from {opacity:0;transform:translateX(-50px);} to {opacity:1;transform:translateX(0);} }
    header {
      background: linear-gradient(90deg, #0d47a1, #000000);
      color: white;
      padding: 40px;
      text-align: center;
      position: relative;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      transition: 0.3s;
    }
    header:hover { transform: scale(1.02); }
    .hamburger { position: absolute; top: 25px; left: 25px; cursor: pointer; z-index: 1000; }
    .hamburger div { width: 25px; height: 3px; background: white; margin: 5px 0; transition: 0.4s; }
    .contact-menu { position: absolute; top: 70px; left: 25px; background: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: none; padding: 15px; width: 250px; z-index: 999; animation: slideIn 0.5s ease; }
    .contact-menu.show { display: block; }
    .product-card {
      background: linear-gradient(135deg, #ffffff, #f1f1f1);
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      margin: 20px 0;
      padding: 25px;
      transition: all 0.3s ease-in-out;
    }
    .product-card:hover { transform: translateY(-10px); box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
    .btn-primary { background: linear-gradient(90deg, #1976d2, #0d47a1); border: none; transition: 0.3s; }
    .btn-primary:hover { transform: scale(1.05); }
    #dashboard { display: none; margin-top: 50px; }
    .spinner { border: 4px solid #e3f2fd; border-top: 4px solid #1565c0; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 30px auto; }
    @keyframes spin { to { transform: rotate(360deg); } }
    footer {
      background: linear-gradient(90deg, #0d47a1, #000000);
      color: white;
      text-align: center;
      padding: 25px;
      margin-top: 50px;
      box-shadow: 0 -4px 10px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <header ondblclick="checkAdminAccess()">
    <div class="hamburger" onclick="toggleContactMenu()">
      <div></div><div></div><div></div>
    </div>
    <h1>Jasa Joki Terpercaya</h1>
    <p>Pesan jasa joki Anda sekarang! Cepat, aman, dan terpercaya.</p>
  </header>

  <div class="contact-menu" id="contactMenu">
    <h5>Kontak Kami</h5>
    <p><strong>Email:</strong> admin@jokiterpercaya.com</p>
    <p>Hubungi kami untuk pertanyaan atau dukungan! Kami akan segera merespons.</p>
  </div>

  <div class="container mt-5">
    <section id="products" class="mt-5">
      <h2 class="text-center mb-4">Produk Joki Kami</h2>
      <div class="row">
        <div class="col-md-4"><div class="product-card"><h4>Joki laporan</h4><p><strong>Rp 50.000 - Rp 100.000</strong></p></div></div>
        <div class="col-md-4"><div class="product-card"><h4>Joki makalah</h4><p><strong>Rp 75.000 - Rp 100.000</strong></p></div></div>
        <div class="col-md-4"><div class="product-card"><h4>Joki Lainnya</h4><p><strong>Harga: Sesuai Kesepakatan</strong></p></div></div>
      </div>
    </section>

    <section id="order" class="mt-5">
      <h2 class="text-center mb-4">Pesan Sekarang</h2>
      <form id="orderForm" class="p-4 bg-light rounded shadow">
        <div class="mb-3"><label class="form-label">Pilih Produk</label>
          <select class="form-control" id="product" required>
            <option value="">-- Pilih Produk --</option>
            <option>Joki laporan</option><option>Joki makalah</option><option>Joki Lainnya</option>
          </select>
        </div>
        <div class="mb-3"><label class="form-label">Catatan</label>
          <textarea class="form-control" id="notes" rows="3" required></textarea>
        </div>
        <div class="mb-3"><label class="form-label">Nama</label>
          <input type="text" class="form-control" id="name" required />
        </div>
        <div class="mb-3"><label class="form-label">Kontak (WA/Email)</label>
          <input type="text" class="form-control" id="contact" required />
        </div>
        <button class="btn btn-primary w-100" type="submit">Kirim Pesanan</button>
      </form>
    </section>

    <!-- üîß DASHBOARD ADMIN -->
    <section id="dashboard">
      <h2 class="text-center mb-4">Dashboard Admin</h2>
      <div class="text-center mb-3">
        <button class="btn btn-danger" onclick="clearAllOrders()">üóë Hapus Semua Pesanan</button>
      </div>
      <div id="ordersList"></div>
    </section>
  </div>

  <footer>
    <p>Butuh bantuan? Hubungi admin via WhatsApp</p>
    <a href="https://wa.me/6287866051265" class="btn btn-success" target="_blank">Hubungi Admin</a>
  </footer>

  <script>
    const adminPassword = "bowokeren";
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxDaeOsZaR0iGKPBDExnpfcr8yIIQEAWBZjyDPNbK8RtOO7LySpQlEW6rHWUN8FPU8Ueg/exec";

    function toggleContactMenu() {
      document.getElementById("contactMenu").classList.toggle("show");
    }

    function checkAdminAccess() {
      const pass = prompt("Masukkan password admin:");
      if (pass === adminPassword) {
        document.getElementById("dashboard").style.display = "block";
        loadOrders();
      } else {
        alert("Password salah!");
      }
    }

    document.getElementById("orderForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  // Ambil data dari form
  const data = {
    product: document.getElementById("product").value,
    notes: document.getElementById("notes").value,
    name: document.getElementById("name").value,
    contact: document.getElementById("contact").value,
    timestamp: new Date().toLocaleString("id-ID"),
  };

  // Pastikan dikirim dalam format FormData (lebih aman)
  const formData = new FormData();
  for (const key in data) formData.append(key, data[key]);

  // Kirim data ke Apps Script
  await fetch(WEB_APP_URL, { method: "POST", body: formData });

  alert("‚úÖ Pesanan berhasil dikirim!");
  e.target.reset();
});


    // üß© PERBAIKAN DASHBOARD
    async function loadOrders() {
      const ordersList = document.getElementById("ordersList");
      ordersList.innerHTML = `<div class="spinner"></div><p class='text-center'>Memuat data dari Google Sheet...</p>`;
      try {
        const res = await fetch(WEB_APP_URL);
        const orders = await res.json();
        if (!orders || orders.length === 0) {
          ordersList.innerHTML = "<p class='text-center'>Belum ada pesanan.</p>";
          return;
        }

        ordersList.innerHTML = orders.map((o, i) => {
          const nama = o.name || o.Nama || o.nama || o["Nama Lengkap"] || "-";
          const produk = o.product || o.Produk || o.produk || "-";
          const catatan = o.notes || o.Catatan || o.catatan || "-";
          const kontak = o.contact || o.Kontak || o.kontak || "-";
          const waktu = o.timestamp || o.Timestamp || o.waktu || "-";

          return `
            <div class="alert alert-info fade show" style="animation: fadeIn 0.5s;">
              <strong>#${i + 1}</strong><br>
              <b>Produk:</b> ${produk}<br>
              <b>Nama:</b> ${nama}<br>
              <b>Kontak:</b> ${kontak}<br>
              <b>Catatan:</b> ${catatan}<br>
              <small>${waktu}</small><br>
              <button class="btn btn-sm btn-outline-danger mt-2" onclick="deleteOrder(${i + 2})">üóë Hapus Pesanan Ini</button>
            </div>`;
        }).join("");
      } catch (err) {
        console.error(err);
        ordersList.innerHTML = "<p class='text-center text-danger'>‚ùå Gagal memuat data.</p>";
      }
    }

    async function clearAllOrders() {
      if (!confirm("Apakah kamu yakin ingin menghapus semua data pesanan di Google Sheet?")) return;
      try {
        await fetch(WEB_APP_URL + "?action=clear", { method: "POST" });
        alert("‚úÖ Semua data pesanan berhasil dihapus!");
        loadOrders();
      } catch (err) {
        console.error(err);
        alert("‚ùå Gagal menghapus data.");
      }
    }

    async function deleteOrder(row) {
      if (!confirm("Hapus pesanan ini?")) return;
      try {
        const res = await fetch(WEB_APP_URL + "?action=deleteOne&row=" + row, { method: "POST" });
        const text = await res.text();
        console.log("Delete response:", text);
        alert("üóë Pesanan dihapus!");
        loadOrders();
      } catch (err) {
        console.error(err);
        alert("‚ùå Gagal menghapus pesanan.");
      }
    }
  </script>
</body>
</html>



